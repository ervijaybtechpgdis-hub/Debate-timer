<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game - Thanni Can Family</title>
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background-color: #111;
  color: #fff;
  margin: 0;
  padding: 0;
}

/* Header with video logo */
header {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #222;
  padding: 10px 0;
  box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}
header video {
  height: 50px;
  margin-right: 15px;
  border-radius: 8px;
  box-shadow: 0 0 15px #0f0;
}
header h1 {
  font-size: 24px;
  margin: 0;
  color: #0f0;
  text-shadow: 0 0 15px #0f0;
}

canvas {
  background-color: #222;
  display: block;
  margin: 20px auto;
  border: 3px solid #fff;
  box-shadow: 0 0 20px #0f0;
}

.dashboard {
  max-width: 400px;
  margin: 20px auto;
  text-align: left;
}
.dashboard h2 { margin-bottom: 5px; }
.dashboard ol { padding-left: 20px; }

button {
  margin: 5px;
  padding: 15px 20px;
  font-size: 18px;
  cursor: pointer;
  background: #0f0;
  color: #111;
  border: none;
  border-radius: 8px;
  transition: 0.3s;
  box-shadow: 0 0 10px #0f0;
}
button:hover {
  box-shadow: 0 0 20px #0f0, 0 0 40px #0f0;
  transform: scale(1.05);
}

/* On-screen directional buttons container */
.controls {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  max-width: 200px;
  margin: 10px auto;
}
.controls button {
  flex: 1 1 45%;
}
</style>
</head>
<body>

<header>
  <video src="logo.mp4" autoplay loop muted></video>
  <h1>Thanni Can Family presents Snake Game</h1>
</header>

<canvas id="gameCanvas" width="400" height="400"></canvas>
<p>Score: <span id="score">0</span></p>

<div class="controls">
  <button onclick="moveUp()">↑</button>
  <button onclick="moveLeft()">←</button>
  <button onclick="moveRight()">→</button>
  <button onclick="moveDown()">↓</button>
</div>

<div class="dashboard">
  <h2>Top Scores</h2>
  <ol id="leaderboard"></ol>
  <button onclick="resetScores()">Reset Scores</button>
</div>

<script>
// Mobile / Desktop variables
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const grid = 20;
let snake = [{x: 200, y: 200}];
let dx = grid;
let dy = 0;
let apple = {x: 0, y: 0};
let score = 0;
let speed = 150;
let gameInterval;

// Player name
let playerName = "";
while(!playerName) {
  playerName = prompt("Enter your name to start playing:");
}

// Sounds
const eatSound = new Audio("eat.mp3");
const gameOverSound = new Audio("gameover.mp3");

// Random apple
function randomApple() {
  apple.x = Math.floor(Math.random() * (canvas.width / grid)) * grid;
  apple.y = Math.floor(Math.random() * (canvas.height / grid)) * grid;
}

// Draw game
function draw() {
  ctx.fillStyle = "rgba(34,34,34,0.3)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Pulsing apple
  const time = Date.now()/200;
  const scale = 0.8 + 0.2 * Math.sin(time);
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.arc(apple.x + grid/2, apple.y + grid/2, grid/2 * scale, 0, 2*Math.PI);
  ctx.fill();

  // Neon snake trail
  snake.forEach((seg,index) => {
    const alpha = 0.2 + 0.8*(index/snake.length);
    ctx.fillStyle = `rgba(0,255,0,${alpha})`;
    ctx.shadowColor = "lime";
    ctx.shadowBlur = 15;
    ctx.fillRect(seg.x,seg.y,grid-1,grid-1);
  });
  ctx.shadowBlur = 0;

  const head = {x: snake[0].x+dx, y: snake[0].y+dy};

  // Collision
  if(head.x<0||head.x>=canvas.width||head.y<0||head.y>=canvas.height||snake.some(s=>s.x===head.x&&s.y===head.y)){
    gameOver();
    return;
  }

  snake.unshift(head);

  // Eat apple
  if(head.x===apple.x && head.y===apple.y){
    score++;
    document.getElementById("score").textContent = score;
    randomApple();
    eatSound.play();
    if(score % 3 === 0 && speed >50){
      speed -=10;
      clearInterval(gameInterval);
      gameInterval = setInterval(draw,speed);
    }
  } else snake.pop();
}

// Keyboard controls
document.addEventListener("keydown", e=>{
  switch(e.key){
    case "ArrowUp": if(dy===0){dx=0;dy=-grid;} break;
    case "ArrowDown": if(dy===0){dx=0;dy=grid;} break;
    case "ArrowLeft": if(dx===0){dx=-grid;dy=0;} break;
    case "ArrowRight": if(dx===0){dx=grid;dy=0;} break;
  }
});

// Mobile button functions
function moveUp(){if(dy===0){dx=0;dy=-grid;}}
function moveDown(){if(dy===0){dx=0;dy=grid;}}
function moveLeft(){if(dx===0){dx=-grid;dy=0;}}
function moveRight(){if(dx===0){dx=grid;dy=0;}}

// Game over
function gameOver(){
  gameOverSound.play();
  alert("Game Over! Score: "+score);
  saveScore(playerName,score);
  resetGame();
  drawLeaderboard();
}

// Reset game
function resetGame(){
  snake=[{x:200,y:200}];
  dx=grid; dy=0;
  score=0;
  document.getElementById("score").textContent = score;
  speed=150;
  randomApple();
  clearInterval(gameInterval);
  gameInterval=setInterval(draw,speed);
}

// Leaderboard
function saveScore(name, newScore){
  let scores = JSON.parse(localStorage.getItem("snakeScores")) || [];
  scores.push({name:name,score:newScore});
  scores.sort((a,b)=>b.score - a.score);
  scores = scores.slice(0,5); // top 5
  localStorage.setItem("snakeScores",JSON.stringify(scores));
}

function drawLeaderboard(){
  const leaderboard=document.getElementById("leaderboard");
  leaderboard.innerHTML="";
  const scores=JSON.parse(localStorage.getItem("snakeScores")) || [];
  scores.forEach(entry=>{
    const li=document.createElement("li");
    li.textContent = `${entry.name}: ${entry.score}`;
    leaderboard.appendChild(li);
  });
}

function resetScores(){
  localStorage.removeItem("snakeScores");
  drawLeaderboard();
}

// Initialize
randomApple();
drawLeaderboard();
gameInterval=setInterval(draw,speed);
</script>

</body>
</html>